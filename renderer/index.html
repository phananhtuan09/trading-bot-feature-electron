<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Crypto Trading Bot - B·∫£ng ƒëi·ªÅu khi·ªÉn</title>
    <link rel="stylesheet" href="styles/main.css" />
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <div class="header">
        <h1>
          <img src="icons/cpu.svg" class="icon" style="stroke: #667eea" /> Trading Bot
          <span class="version-badge" id="appVersion">v1.0.0</span>
        </h1>
        <div class="status-badges">
          <span class="status-badge inactive" id="botStatus">Bot: D·ª´ng</span>
          <span class="status-badge inactive" id="orderStatus">L·ªánh: Kh√¥ng ho·∫°t ƒë·ªông</span>
        </div>
      </div>

      <!-- Stats Overview -->
      <div class="stats-overview">
        <div class="stat-card">
          <div class="stat-card-title">
            <img src="icons/dollar-sign.svg" class="icon" style="stroke: #10b981" /> T√†i kho·∫£n
          </div>
          <div class="stat-row">
            <span class="stat-label">S·ªë d∆∞</span>
            <span class="stat-value" id="balance">0 USDT</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">L·ª£i nhu·∫≠n</span>
            <span class="stat-value" id="profit">+0.00 (0%)</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-card-title">
            <img src="icons/bar-chart-2.svg" class="icon" style="stroke: #4a90e2" /> L·ªánh
          </div>
          <div class="stat-row">
            <span class="stat-label">H√¥m nay</span>
            <span class="stat-value" id="ordersToday">0 / 10</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">T·ªïng</span>
            <span class="stat-value" id="totalOrders">0</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-card-title">
            <img src="icons/zap.svg" class="icon" style="stroke: #f5a623" /> K·∫øt n·ªëi
          </div>
          <div class="stat-row">
            <span class="stat-label">Binance</span>
            <span class="stat-value" id="binanceStatus">‚ùå</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">Discord/TG</span>
            <span class="stat-value" id="notificationStatus">‚ùå</span>
          </div>
        </div>
      </div>

      <!-- Tabs Container -->
      <div class="tabs-container">
        <div class="tabs">
          <div class="tab active" onclick="switchTab('positions')">
            <img src="icons/briefcase.svg" class="icon" style="stroke: currentColor" /> V·ªã th·∫ø
          </div>
          <div class="tab" onclick="switchTab('signals')">
            <img src="icons/wifi.svg" class="icon" style="stroke: currentColor" /> T√≠n hi·ªáu
          </div>
          <div class="tab" onclick="switchTab('logs')">
            <img src="icons/file-text.svg" class="icon" style="stroke: currentColor" /> Logs
          </div>
        </div>

        <!-- Tab: Open Positions -->
        <div id="positions" class="tab-content active">
          <div class="table-container">
            <table id="positionsTable">
              <thead>
                <tr>
                  <th>C·∫∑p ti·ªÅn</th>
                  <th>H∆∞·ªõng</th>
                  <th>Gi√° v√†o</th>
                  <th>Gi√° hi·ªán t·∫°i</th>
                  <th>L√£i/L·ªó</th>
                  <th></th>
                </tr>
              </thead>
              <tbody id="positionsTableBody">
                <!-- Positions will be populated dynamically -->
              </tbody>
            </table>
          </div>
        </div>

        <!-- Tab: Signals -->
        <div id="signals" class="tab-content">
          <div class="table-container">
            <table id="signalsTable">
              <thead>
                <tr>
                  <th>Th·ªùi gian</th>
                  <th>C·∫∑p ti·ªÅn</th>
                  <th>H∆∞·ªõng</th>
                  <th>Gi√°</th>
                  <th>TP/SL</th>
                  <th>ƒê·ªô tin c·∫≠y</th>
                  <th></th>
                </tr>
              </thead>
              <tbody id="signalsTableBody">
                <!-- Signals will be populated dynamically -->
              </tbody>
            </table>
          </div>
        </div>

        <!-- Tab: Logs -->
        <div id="logs" class="tab-content">
          <div class="log-container" id="logContainer">
            <!-- Logs will be populated dynamically -->
          </div>
        </div>
      </div>
    </div>

    <!-- Fixed Action Buttons -->
    <div class="fixed-actions">
      <div class="action-buttons">
        <button class="btn btn-success" id="startBtn">
          <img src="icons/play.svg" class="icon" style="stroke: white" /> B·∫Øt ƒë·∫ßu qu√©t
        </button>
        <button class="btn btn-danger" id="stopBtn">
          <img src="icons/pause.svg" class="icon" style="stroke: white" /> D·ª´ng qu√©t
        </button>
        <button class="btn btn-primary" id="startOrderBtn">
          <img src="icons/trending-up.svg" class="icon" style="stroke: white" /> B·∫Øt ƒë·∫ßu qu√©t & ƒê·∫∑t
          l·ªánh
        </button>
        <button class="btn btn-warning" id="stopOrderBtn">
          <img src="icons/stop-circle.svg" class="icon" style="stroke: #333" /> D·ª´ng qu√©t & ƒê·∫∑t l·ªánh
        </button>
        <button class="btn btn-secondary" id="settingsBtn">
          <img src="icons/settings.svg" class="icon" style="stroke: #333" /> C√†i ƒë·∫∑t
        </button>
      </div>
      <div style="text-align: center; margin-top: 8px">
        <button
          class="btn btn-warning"
          id="reportBtn"
          style="width: calc(100% - 20px); max-width: 1180px"
        >
          <img src="icons/bar-chart-2.svg" class="icon" style="stroke: #333" /> B√°o c√°o
        </button>
      </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2><img src="icons/settings.svg" class="icon" style="stroke: #667eea" /> C√†i ƒë·∫∑t</h2>
          <button class="close-modal" id="closeSettingsModal">
            <img src="icons/x.svg" class="icon" style="stroke: #666" />
          </button>
        </div>
        <div class="modal-body">
          <!-- Settings Tabs -->
          <div class="modal-tabs">
            <div class="modal-tab active" onclick="switchSettingsTab('strategy', event)">
              <img src="icons/sliders.svg" class="icon" style="stroke: currentColor" /> Chi·∫øn l∆∞·ª£c
            </div>
            <div class="modal-tab" onclick="switchSettingsTab('keys', event)">
              <img src="icons/key.svg" class="icon" style="stroke: currentColor" /> API Keys
            </div>
            <div class="modal-tab" onclick="switchSettingsTab('app', event)">
              <img src="icons/tool.svg" class="icon" style="stroke: currentColor" /> App Config
            </div>
          </div>

          <!-- Tab: Strategy Settings -->
          <div id="strategy" class="modal-tab-content active">
            <div class="section-title">C√†i ƒë·∫∑t chung</div>
            <div class="form-grid">
              <div class="form-group">
                <label>Khung th·ªùi gian</label>
                <select id="interval">
                  <option value="1m">1m</option>
                  <option value="5m">5m</option>
                  <option value="15m">15m</option>
                  <option value="1h" selected>1h</option>
                  <option value="4h">4h</option>
                  <option value="1d">1d</option>
                </select>
              </div>
              <div class="form-group">
                <label>T√†i s·∫£n c∆° s·ªü</label>
                <input type="text" id="quoteAsset" value="USDT" readonly />
              </div>
              <div class="form-group">
                <label>S·ªë c·∫∑p ti·ªÅn t·ªëi ƒëa</label>
                <input type="number" id="maxSymbols" value="500" />
              </div>
              <div class="form-group">
                <label>Gi·ªõi h·∫°n ƒë·ªìng th·ªùi</label>
                <input type="number" id="concurrencyLimit" value="20" />
              </div>
              <div class="form-group">
                <label>S·ªë n·∫øn gi·ªØ t·ªëi ƒëa</label>
                <input type="number" id="maxCandlesHold" value="96" />
              </div>
            </div>

            <div class="section-title">C√†i ƒë·∫∑t b·ªô l·ªçc</div>
            <div class="form-grid">
              <div class="form-group">
                <label>Chu k·ª≥ MA xu h∆∞·ªõng</label>
                <input type="number" id="trendMaPeriod" value="200" />
              </div>
              <div class="form-group">
                <label>Kh·ªëi l∆∞·ª£ng giao d·ªãch t·ªëi thi·ªÉu (USDT)</label>
                <input type="number" id="minTradeVolume" value="1000000" />
              </div>
              <div class="form-group">
                <label>ƒêi·ªÉm tin c·∫≠y t·ªëi thi·ªÉu</label>
                <input type="number" id="minConfidenceScore" value="60" min="0" max="100" />
              </div>
            </div>

            <div class="section-title">C√†i ƒë·∫∑t Bollinger Bands</div>
            <div class="form-grid">
              <div class="form-group">
                <label>Chu k·ª≥</label>
                <input type="number" id="bbPeriod" value="20" />
              </div>
              <div class="form-group">
                <label>ƒê·ªô l·ªách chu·∫©n</label>
                <input type="number" id="bbStdDev" value="2" step="0.1" />
              </div>
            </div>

            <div class="section-title">C√†i ƒë·∫∑t RSI</div>
            <div class="form-grid">
              <div class="form-group">
                <label>Chu k·ª≥</label>
                <input type="number" id="rsiPeriod" value="14" />
              </div>
            </div>

            <div class="section-title">C√†i ƒë·∫∑t MACD</div>
            <div class="form-grid">
              <div class="form-group">
                <label>Chu k·ª≥ nhanh</label>
                <input type="number" id="macdFastPeriod" value="12" />
              </div>
              <div class="form-group">
                <label>Chu k·ª≥ ch·∫≠m</label>
                <input type="number" id="macdSlowPeriod" value="26" />
              </div>
              <div class="form-group">
                <label>Chu k·ª≥ t√≠n hi·ªáu</label>
                <input type="number" id="macdSignalPeriod" value="9" />
              </div>
            </div>

            <div class="section-title">C√†i ƒë·∫∑t EMA</div>
            <div class="form-grid">
              <div class="form-group">
                <label>Chu k·ª≥ ng·∫Øn</label>
                <input type="number" id="emaShortPeriod" value="20" />
              </div>
              <div class="form-group">
                <label>Chu k·ª≥ d√†i</label>
                <input type="number" id="emaLongPeriod" value="50" />
              </div>
            </div>

            <div class="section-title">C√†i ƒë·∫∑t ADX</div>
            <div class="form-grid">
              <div class="form-group">
                <label>Chu k·ª≥</label>
                <input type="number" id="adxPeriod" value="14" />
              </div>
            </div>

            <div class="section-title">C√†i ƒë·∫∑t ATR</div>
            <div class="form-grid">
              <div class="form-group">
                <label>Chu k·ª≥</label>
                <input type="number" id="atrPeriod" value="14" />
              </div>
            </div>
          </div>

          <!-- Tab: API Keys -->
          <div id="keys" class="modal-tab-content">
            <div class="section-title">Binance API</div>
            <div class="form-grid">
              <div class="form-group">
                <label>Lo·∫°i t√†i kho·∫£n</label>
                <select id="testingMode">
                  <option value="false">Th·∫≠t</option>
                  <option value="true">Testnet</option>
                </select>
              </div>
              <div class="form-group" style="grid-column: 1 / -1">
                <label>API Key</label>
                <input type="text" id="apiKey" placeholder="Nh·∫≠p Binance API Key" />
              </div>
              <div class="form-group" style="grid-column: 1 / -1">
                <label>API Secret</label>
                <input type="password" id="apiSecret" placeholder="Nh·∫≠p Binance API Secret" />
              </div>
            </div>

            <div class="section-title">T√≠ch h·ª£p Discord</div>
            <div class="form-grid">
              <div class="form-group">
                <label>B·∫≠t Discord</label>
                <select id="discordEnabled">
                  <option value="false">T·∫Øt</option>
                  <option value="true">B·∫≠t</option>
                </select>
              </div>
              <div class="form-group" style="grid-column: 1 / -1">
                <label>Bot Token</label>
                <input type="password" id="discordToken" placeholder="Nh·∫≠p Discord Bot Token" />
              </div>
              <div class="form-group" style="grid-column: 1 / -1">
                <label>Channel ID</label>
                <input type="text" id="discordChannelId" placeholder="Nh·∫≠p Discord Channel ID" />
              </div>
              <div class="form-group" style="grid-column: 1 / -1">
                <button id="testDiscord" class="btn btn-secondary" type="button">
                  üß™ Test Discord Connection
                </button>
              </div>
            </div>

            <div class="section-title">T√≠ch h·ª£p Telegram</div>
            <div class="form-grid">
              <div class="form-group">
                <label>B·∫≠t Telegram</label>
                <select id="telegramEnabled">
                  <option value="false">T·∫Øt</option>
                  <option value="true">B·∫≠t</option>
                </select>
              </div>
              <div class="form-group" style="grid-column: 1 / -1">
                <label>Bot Token</label>
                <input type="password" id="telegramToken" placeholder="Nh·∫≠p Telegram Bot Token" />
              </div>
              <div class="form-group" style="grid-column: 1 / -1">
                <label>Chat ID</label>
                <div style="display: flex; gap: 10px; align-items: center">
                  <input
                    type="text"
                    id="telegramChatId"
                    placeholder="Nh·∫≠p Telegram Chat ID ho·∫∑c b·∫•m n√∫t 'L·∫•y Chat ID'"
                    style="flex: 1"
                  />
                  <button
                    id="getTelegramChatId"
                    class="btn btn-primary"
                    type="button"
                    style="white-space: nowrap"
                  >
                    üîç L·∫•y Chat ID
                  </button>
                </div>
                <small style="color: #666; margin-top: 5px; display: block">
                  üí° G·ª≠i tin nh·∫Øn "/start" cho bot tr∆∞·ªõc khi b·∫•m "L·∫•y Chat ID"
                </small>
              </div>
              <div class="form-group" style="grid-column: 1 / -1">
                <button id="testTelegram" class="btn btn-secondary" type="button">
                  üß™ Test Telegram Connection
                </button>
              </div>
            </div>
          </div>

          <!-- Tab: App Config -->
          <div id="app" class="modal-tab-content">
            <div class="section-title">C√†i ƒë·∫∑t l·ªánh</div>
            <div class="form-grid">
              <div class="form-group">
                <label>Leverage (ƒê√≤n b·∫©y)</label>
                <input type="number" id="leverage" value="20" min="1" max="125" />
              </div>
              <div class="form-group">
                <label>S·ªë ti·ªÅn m·ªói l·ªánh (USDT)</label>
                <input type="number" id="quantity" value="10" min="1" />
              </div>
              <div class="form-group">
                <label>Take Profit (%)</label>
                <input
                  type="number"
                  id="takeProfitPercent"
                  value="4"
                  min="0.1"
                  max="100"
                  step="0.1"
                />
              </div>
              <div class="form-group">
                <label>Stop Loss (%)</label>
                <input
                  type="number"
                  id="stopLossPercent"
                  value="2"
                  min="0.1"
                  max="100"
                  step="0.1"
                />
              </div>
              <div class="form-group">
                <label>S·ªë l·ªánh t·ªëi ƒëa m·ªói ng√†y</label>
                <input type="number" id="maxOrdersPerDay" value="10" min="1" />
              </div>
              <div class="form-group">
                <label>Gi·ªõi h·∫°n l·ªánh m·ªói l·∫ßn qu√©t</label>
                <input type="number" id="orderLimitPerScan" value="3" min="1" />
              </div>
            </div>

            <div class="section-title">C√†i ƒë·∫∑t Bot</div>
            <div class="form-grid">
              <div class="form-group">
                <label>Kho·∫£ng th·ªùi gian qu√©t (ms)</label>
                <input type="number" id="scanInterval" value="3600000" min="60000" />
              </div>
              <div class="form-group">
                <label>B·∫≠t ghi log</label>
                <select id="loggingEnabled">
                  <option value="true">B·∫≠t</option>
                  <option value="false">T·∫Øt</option>
                </select>
              </div>
            </div>

            <div class="section-title">Qu·∫£n l√Ω r·ªßi ro</div>
            <div class="form-grid">
              <div class="form-group">
                <label>ƒêi·ªÉm tin c·∫≠y t·ªëi thi·ªÉu</label>
                <input type="number" id="riskMinConfidence" value="10" min="0" max="100" />
              </div>
              <div class="form-group">
                <label>S·ªë n·∫øn gi·ªØ t·ªëi ƒëa</label>
                <input type="number" id="riskMaxCandles" value="96" min="10" />
              </div>
            </div>
          </div>

          <div style="margin-top: 20px; display: flex; gap: 10px">
            <button class="btn btn-success" style="flex: 1" id="saveSettingsBtn">
              <img src="icons/save.svg" class="icon" style="stroke: white" /> L∆∞u c·∫•u h√¨nh
            </button>
            <button class="btn btn-warning" style="flex: 1" id="resetSettingsBtn">
              <img src="icons/refresh-cw.svg" class="icon" style="stroke: #333" /> ƒê·∫∑t l·∫°i
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Report Modal -->
    <div id="reportModal" class="modal">
      <div class="modal-content" style="max-width: 600px">
        <div class="modal-header">
          <h2>
            <img src="icons/bar-chart-2.svg" class="icon" style="stroke: #667eea" /> B√°o c√°o giao
            d·ªãch
          </h2>
          <button class="close-modal" id="closeReportModal">
            <img src="icons/x.svg" class="icon" style="stroke: #666" />
          </button>
        </div>
        <div class="modal-body">
          <div class="report-content" id="reportContent">
            <!-- Report content will be populated dynamically -->
          </div>
        </div>
      </div>
    </div>

    <!-- Update Notification -->
    <div id="updateNotification" class="update-notification" style="display: none">
      <div class="update-content">
        <h3>
          <img src="icons/refresh-cw.svg" class="icon" style="stroke: #667eea" /> C√≥ b·∫£n c·∫≠p nh·∫≠t
        </h3>
        <p id="updateMessage">C√≥ phi√™n b·∫£n m·ªõi. B·∫°n c√≥ mu·ªën t·∫£i xu·ªëng v√† c√†i ƒë·∫∑t kh√¥ng?</p>
        <div class="update-actions">
          <button class="btn btn-primary" id="downloadUpdateBtn">T·∫£i xu·ªëng</button>
          <button class="btn btn-secondary" id="dismissUpdateBtn">ƒê·ªÉ sau</button>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="js/utils/api.js"></script>
    <script src="js/components/dashboard.js"></script>
    <script src="js/components/settings.js"></script>
    <script src="js/components/positions.js"></script>
    <script src="js/components/signals.js"></script>
    <script src="js/components/logs.js"></script>
    <script src="js/app.js"></script>
  </body>
</html>
